<!DOCTYPE html>
<html>
  <head>
    <title>pxtiles1</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js" type="text/javascript"></script>
  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.10/leaflet.draw.css"/> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.10/leaflet.draw.js"></script> 
    <!-- Latest compiled and minified CSS -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>   
    <style>
      html, body, #map { width:100%; height:100%; margin:0; padding:0; z-index: 1; background: #ffffff; }
      #slider{ position: absolute; top: 10px; right: 10px; z-index: 5; }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">
      
      var bounds = L.latLngBounds([[-0.7538112080198971, 38.3994140625], [-8997.737833548104, 6470.3994140625]]);
      var mapExtent = [0.00000000, -9100.00000000, 6500.00000000, 0.00000000];
      var mapMinZoom = 4;
      var mapMaxZoom = 7;
      var mapMaxResolution = 0.50000000;
      var mapMinResolution = Math.pow(2, mapMaxZoom) * mapMaxResolution;
      var tileExtent = [0.00000000, -9100.00000000, 6500.00000000, 0.00000000];
      var crs = L.CRS.Simple;
      crs.transformation = new L.Transformation(1, -tileExtent[0], -1, tileExtent[3]);
      crs.scale = function(zoom) {
        return Math.pow(2, zoom) / mapMinResolution;
      };
      crs.zoom = function(scale) {
        return Math.log(scale * mapMinResolution) / Math.LN2;
      };
      var layer;
      var map = new L.Map('map', {
        maxZoom: mapMaxZoom,
        minZoom: mapMinZoom,
        // maxBounds: bounds,
        crs: crs,
        attributionControl: false,
        zoomControl: false
      });

      
      L.control.zoom({
	    position: 'bottomright'
      }).addTo(map);

        layer = L.tileLayer('{z}/{x}/{y}.jpg', {
          minZoom: mapMinZoom, maxZoom: mapMaxZoom,
          attribution: 'Rendered with <a href="https://www.maptiler.com/desktop/">MapTiler Desktop</a>',
          noWrap: true,
          tms: false
        }).addTo(map);
      map.fitBounds([
        crs.unproject(L.point(mapExtent[2], mapExtent[3])),
        crs.unproject(L.point(mapExtent[0], mapExtent[1]))
      ]);
    
   




      


    map.on('click', function(e) {
      console.log(e.latlng.lat + ", " + e.latlng.lng)
    });
    



	// ....polygon custom style.....
  function style(feature) {
        return {
          weight: 0,
          opacity: 0,
		  fillOpacity: 0,
          fillColor: '#0000ffff'
          // dashArray: '3',

        };
      }
      
	//  ....marker 1 on tree that we have just make......	   
	var  tree1gj='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[4512,-2375.71]}}'
	var tree1 = L.geoJSON(JSON.parse(tree1gj), {
     }).addTo(map);
	 //  ....marker popup information......
	 tree1.bindPopup(' <img src="assets/images/img_avatar.png" style="border-radius: 50%;" width="100" height="100" alt="Avatar"><br><br><h6>tree 1 Information</h6><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry</p><br><button type="button" class="btn btn-primary btn-block">SHOP ALL</button>',{maxWidth: 120});
				   
	//  ....marker 2 on fire mountain that we have just make......	   
	var  marker2gj='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[1448.800049,-4993.972933]}}'
	var marker2 = L.geoJSON(JSON.parse(marker2gj), {
     }).addTo(map);
	 //  ....marker popup information......
	 marker2.bindPopup(' <img src="assets/images/img_avatar.png" style="border-radius: 50%;" width="100" height="100" alt="Avatar"><br><br><h6>Fire Mountain</h6><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry</p><br><button type="button" class="btn btn-primary btn-block">SHOP ALL</button>',{maxWidth: 120});
				   
	//  ....book polygon that we have just make......
	var  bookgj='{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[2966.400146,-5132.202121],[3136,-5029.847091],[3209.600098,-5148.195091],[3027.199951,-5237.755697],[2966.400146,-5132.202121]]]}}'
    var book = L.geoJSON(JSON.parse(bookgj), {
      id: 'book',
       style: style
     }).addTo(map);
	 //  ....you can add popup information/styling  ......
	 book.bindPopup(' <img src="assets/images/img_avatar.png" style="border-radius: 50%;" width="100" height="100" alt="Avatar"><br><br><h6>Book Information</h6><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry</p><br><button type="button" class="btn btn-primary btn-block">SHOP ALL</button>',{maxWidth: 120});
	//  ....you can write in tooltip what ever you want to show on that specific location it will will be on map......
	 book.bindTooltip("this book is geo taged",
     {permanent: true, direction:"center"}
     ).openTooltip()


	


	// ........to geotag things on map using this tool you can remove this code when ever you are finished with geotagging.......
	var drawnItems;
    drawnItems = new L.FeatureGroup()
    map.addLayer(drawnItems)
  
      var drawControl = new L.Control.Draw({
        draw:{
          polygon : {
                      allowIntersection: false,
                      showLength: true,
                      metric:['km', 'm']
                  },
              // polyline:false,
              // marker: false,
              squire: true,
              circlemarker: false,
              rectangle: false,
              circle: false,
          },
        edit: {
          featureGroup: drawnItems,
          remove: true
  
        }
      });
    
    map.addControl(drawControl);
     
    map.on(L.Draw.Event.CREATED, function (e) {
      var type = e.layerType;
       layer = e.layer;
      var arr = layer.toGeoJSON()
      var arr_for_db = JSON.stringify(arr);
       geomfordb=arr_for_db

	  alert(arr_for_db)

      if (type === 'marker') {
          layer.bindPopup('A popup!');
        }
  
        drawnItems.addLayer(layer);

  
    });
  
  
    map.on('draw:editvertex', function (e) { 
      var type = e.polyType;
      var poly = e.poly;
      var arr = poly.toGeoJSON()
      var arr_for_db = JSON.stringify(arr);
      geomfordb=arr_for_db

	  alert(arr_for_db)
    });
    </script>
  </body>
</html>
